
<div class="users-page">
<!-- IF USER SIGNED IN -->
<% if user_signed_in? %>

  <!-- IF VIEWING YOUR OWN PROFILE -->
  <% if (current_user.email == @user.email) %>

    <section id="gallery-start" data-bottom-top="background-position: 50% -400px;" data-top-bottom="background-position: 50% 0px;">
      <h1 class="header user-profile-photo"><%= image_tag current_user.user_profile_photo %></h1>
      <p class="header"><%= current_user.user_name.upcase %></p>
    </section>
    
    <%#= link_to "Settings", edit_user_path %>

    <!-- DISPLAY PROFILE PHOTO OR PLACEHOLDER -->
<!--     <%# if !@user.user_profile_photo? %>
      <p>
        <strong>No Profile Photo:</strong>
         <%#= image_tag "placeholder-profile.png", height: 100 %>
      </p>  
    <%# else %>
      <p>
        <strong>Profile Photo:</strong>
         <%#= image_tag @user.user_profile_photo, height: 100 %>
      </p>
    <%# end %> -->
     <li><%= link_to "LOGOUT", destroy_user_session_path, method: :delete%></li>

    <div class="user-account-header">
      <h4><a>PRIVATE PROFILE SETTINGS</a></h4>
    </div>
      <strong>Name:</strong>
      <%= @user.name %>
    </p>
    <p>
      <strong>Email:</strong>
      <%= @user.email %>
    </p>
    <p>
      <strong>Username:</strong>
      <%= @user.user_name %>
    </p>


    <div class="user-profile-editor">
    <h4><%= link_to 'EDIT PROFILE', edit_user_path(@user) %> 
    <%= link_to 'EDIT ACCOUNT', edit_user_registration_path, :class => 'navbar-link' %></h4>
    </div>

 <!--    <div class="user-profile-header">
      <h4><a>PROFILE</a></h4>
    </div> -->

    <p>
      <strong>Bio:</strong>
      <%= @user.bio %>
    </p>


  <!-- IF SIGNED IN BUT VIEWING ANOTHER USER'S PROFILE -->
  <% else %>

    <section id="gallery-start" data-bottom-top="background-position: 50% -400px;" data-top-bottom="background-position: 50% 0px;">
      <h1 class="header user-profile-photo"><%= image_tag @user.user_profile_photo %></h1>
      <p class="header"><%= @user.user_name.upcase %></p>
    </section>

    <!-- DISPLAY PROFILE PHOTO OR PLACEHOLDER -->
<!--     <%# if !@user.user_profile_photo? %>
      <p>
        <strong>No Profile Photo:</strong>
         <%#= image_tag "placeholder-profile.png", height: 100 %>
      </p>  
    <%# else %>
      <p>
        <strong>Profile Photo:</strong>
         <%#= image_tag @user.user_profile_photo, height: 100 %>
      </p>
    <%# end %> -->

<!--     <p>
      <strong>Username:</strong>
      <%#= @user.user_name %>
    </p> -->
    <p>
      <strong>Bio:</strong>
      <%= @user.bio %>
    </p>

  <% end %>

<% else %>

    <section id="gallery-start" data-bottom-top="background-position: 50% -400px;" data-top-bottom="background-position: 50% 0px;">
      <h1 class="header user-profile-photo"><%= image_tag @user.user_profile_photo %></h1>
      <p class="header"><%= @user.user_name.upcase %></p>
    </section>

    <!-- display user profile photo if it exists, otherwise placeholder -->
<!--     <%# if !@user.user_profile_photo? %>
      <p>
        <strong>No Profile Photo:</strong>
       <%#= image_tag "placeholder-profile.png", height: 100 %>
      </p>
    <%# else %>
      <p> 
        <strong>Profile Photo:</strong>
         <%#= image_tag @user.user_profile_photo, height: 100 %>
      </p>
    <%# end %> -->

    <p>
      <strong>Bio:</strong>
      <%= @user.bio %>
    </p>

  <% end %>
<p id="notice"><%= notice %></p>

<!-- <p>
  <strong>Role:</strong>
  <%#= @user.role %>
</p> -->

<!-- SHOW USER'S REVIEWS - modify wording based on owner of profile -->


  <% if @user.reviews.length == 1 %>
    <h2><%= @user.reviews.length %> REVIEW</h2>
  <% else %>
    <h2><%= @user.reviews.length %> REVIEWS</h2>
  <% end %>




  <% @user.reviews.each do |review| %>
    <%= link_to review.business.name, review.business %>
    <%= review.rating %>
    <%= review.content %>

    <!-- THIS DELETE LINK DOES NOT WORK PROPERLY YET -->
    <%= link_to 'Delete review', review, method: :delete, data: { confirm: 'Are you sure?' } %></p>
    <p>You'll want to eventually include more info about these businesses, maybe a photo.</p> 
  <% end %>

<!-- SHOW USER'S PHOTOS - modify wording based on owner of profile -->



  <% if @user.photos.length == 1 %>
    <h2><%= @user.photos.length %> PHOTO</h2>
  <% else %>
    <h2><%= @user.photos.length %> PHOTOS</h2>
  <% end %>



  

    <section id="gallery">
      <div class="container">
        <div class="row divide">
          <% @user.photos.reverse.each do |photo| %>
            <div class="col-sm-6 col-md-4 gallery-item">
              <%= link_to photo.business.name.upcase, photo.business %> |
              BY: <%= link_to photo.user.user_name.upcase, photo.user %><br>
              <%= link_to 'SHOW', photo %> |
              <%= link_to 'EDIT', edit_photo_path(photo) %> |
              <%= link_to 'DELETE', photo, method: :delete, data: { confirm: 'Are you sure?' } %><br>

              <a href="<%= photo.business_photo %>" data-toggle="lightbox">

              <div class="thumbnail-gallery" style="background-image:url('<%= photo.business_photo %>'); background-size:cover" height="200">
              </div>

              </a>
              
              DESCRIPTION: <%= photo.description[0..30] %>
            </div>
          <% end %>
        </div>
      </div>
    </section>

</div>




  



