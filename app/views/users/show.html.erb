<p id="notice"><%= notice %></p>

<% if user_signed_in? %>

  <% if (current_user.email == @user.email) %>

    <h1>Your Profile</h1>


    <%= link_to 'Edit Profile', edit_user_path(@user) %> |
    <%= link_to 'Edit Account Settings', edit_user_registration_path, :class => 'navbar-link' %>
    <%#= link_to "Settings", edit_user_path %>


  <!-- display user profile photo if it exists, otherwise placeholder -->
    <% if !@user.user_profile_photo? %>

    <p>
      <strong>No Profile Photo:</strong>
       <%= image_tag "placeholder-profile.png", height: 100 %>
    </p>

  <% else %>

    <p>
      <strong>Profile Photo:</strong>
       <%= image_tag @user.user_profile_photo, height: 100 %>
    </p>

  <% end %>

  <p>
    <strong>Name:</strong>
    <%= @user.name %>
  </p>

  <p>
    <strong>Email:</strong>
    <%= @user.email %>
  </p>

  <p>
    <strong>Username:</strong>
    <%= @user.user_name %>
  </p>

  <% end %>

<% else %>


  <h1><%= @user.user_name %>'s Profile</h1>

  <!-- display user profile photo if it exists, otherwise placeholder -->
  <% if !@user.user_profile_photo? %>

  <p>
  <strong>No Profile Photo:</strong>
   <%= image_tag "placeholder-profile.png", height: 100 %>
</p>

  <% else %>

<p>
  <strong>Profile Photo:</strong>
   <%= image_tag @user.user_profile_photo, height: 100 %>
</p>

<% end %>

<% end %>

<!-- <p>
  <strong>Role:</strong>
  <%#= @user.role %>
</p> -->

<!-- SHOW USER'S REVIEWS - modify wording based on owner of profile -->
<% if user_signed_in? %>

<% if @user.reviews.length == 0 %>
  


  

    <% if (current_user.email == @user.email) %>
      <h2>You have not reviewed any businesses.</h2>
    <% else %>
      <h2> <%= @user.user_name %> has not reviewed any businesses.</h2>
    <% end %>

  <% elsif @user.reviews.length == 1 %>

    <% if (current_user.email == @user.email) %>
      <h2>You have reviewed <%= @user.reviews.length %> business:</h2>
    <% else %>
      <h2> <%= @user.user_name %> has reviewed <%= @user.reviews.length %> business:</h2>
    <% end %>

  <% else %>

    <% if (current_user.email == @user.email) %>
      <h2>You have reviewed <%= @user.reviews.length %> businesses:</h2>
    <% else %>
      <h2> <%= @user.user_name %> has reviewed <%= @user.reviews.length %> businesses:</h2>
    <% end %>
   <% end %>
   <% else %>
   <h4>Reviews:</h4>

  <% end %>


  <% @user.reviews.each do |review| %>
    <%= link_to review.business.name, review.business %>
    <%= review.rating %>
    <%= review.content %>

    <!-- THIS DELETE LINK DOES NOT WORK PROPERLY YET -->
    <%#= link_to 'Delete review', photo, method: :delete, data: { confirm: 'Are you sure?' } %></p>
    <p>You'll want to eventually include more info about these businesses, maybe a photo.</p> 
  <% end %>

<!-- SHOW USER'S PHOTOS - modify wording based on owner of profile -->
<% if user_signed_in? %>

<% if @user.photos.length == 0 %> 

   <% if (current_user.email == @user.email) %>
      <h2>You have not uploaded any photos.</h2>
    <% else %>
      <h2> <%= @user.user_name %> has not uploaded any photos.</h2>
    <% end %>

  <% elsif @user.photos.length == 1 %>

    <% if (current_user.email == @user.email) %>
      <h2>You have uploaded <%= @user.photos.length %> photo:</h2>
    <% else %>
      <h2> <%= @user.user_name %> has uploaded <%= @user.photos.length %> photo:</h2>
    <% end %>

  <% else %>

    <% if (current_user.email == @user.email) %>
      <h2>You have uploaded <%= @user.photos.length %> photos:</h2>
    <% else %>
      <h2> <%= @user.user_name %> has uploaded <%= @user.photos.length %> photos:</h2>
    <% end %>

  <% end %>
   <% else %>
   <h4>Photos:</h4>
<% end %>

  



  


    <section id="gallery">
      <div class="container">
        <div class="row divide">
          <!-- <div class="col-sm-6 col-md-4 gallery-item"> -->
            <% @user.photos.each do |photo| %>
              <div class="col-sm-6 col-md-4 gallery-item">
                <%= link_to photo.business.name, photo.business %>
                <%= photo.description %>
                <div class="thumbnail">
                  <a href="">
                    <img src="<%= photo.business_photo %>" height="200" >
                    <div class="gallery-overlay"></div>
                  </a>
                </div>
                <%= link_to 'Show', photo %> |
                <%= link_to 'Edit', edit_photo_path(photo) %> |
                <%= link_to 'Destroy', photo, method: :delete, data: { confirm: 'Are you sure?' } %><br>
              </div>
            <% end %>
                </div>
      </div>
    </section>

<!-- include businesses, etc. -->
<br>
